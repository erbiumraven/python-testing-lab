{"uid":"afc1d24bf6b34717","name":"test_upload_pet_file_with_metadata_succeeds[longlonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglong]","fullName":"tests.api.test_upload_image.TestUploadImage#test_upload_pet_file_with_metadata_succeeds","historyId":"acc557de868c81af8c262a6cd72ca641","time":{"start":1759063607745,"stop":1759063607770,"duration":25},"description":"Verify that uploading a file with metadata value succeeds","descriptionHtml":"<p>Verify that uploading a file with metadata value succeeds</p>\n","status":"failed","statusMessage":"AssertionError: Expected 200, got 404","statusTrace":"self = <test_upload_image.TestUploadImage object at 0x7f7102700a50>\noctet_stream_session = <requests.sessions.Session object at 0x7f7102742dd0>\npet_url = 'https://petstore3.swagger.io/api/v3/pet'\ntest_pet = {'category': {'id': 1, 'name': 'Dogs'}, 'id': 571501, 'name': 'Hardy', 'photoUrls': ['https://pixabay.com/photos/pomeranian-dog-puppy-mammal-animal-8096885/'], ...}\ntemp_data_file = '/tmp/tmp13dxhcf9.webp'\nmetadata = 'longlonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglong'\n\n    @pytest.mark.parametrize(\"metadata\", [\n        \"\",\n        \"12345\",\n        \"abcDEF\",\n        \"with space\",\n        \"special_!@#$%^&*()\",\n        \"meta=param&flag=true\",\n        \"тест\",\n        \"犬\",\n        \"emoji_\uD83D\uDE0A\uD83D\uDD25\",\n        \"long\" * 50\n    ])\n    @allure.description(\"Verify that uploading a file with metadata value succeeds\")\n    def test_upload_pet_file_with_metadata_succeeds(self, octet_stream_session, pet_url, test_pet, temp_data_file,\n                                                    metadata):\n        pet_id = test_pet[\"id\"]\n        upload_url = build_pet_upload_file_url(pet_url, pet_id=pet_id, metadata=metadata)\n    \n        with open(temp_data_file, \"rb\") as file:\n            response = upload_post_with_allure(octet_stream_session, upload_url, file)\n    \n>       assert_file_successfully_uploaded(response, pet_id)\n\ntests/api/test_upload_image.py:47: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = <Response [404]>, pet_id = 571501\n\n    def assert_file_successfully_uploaded(response, pet_id):\n        with allure.step(\"Verify that file was uploaded successfully\"):\n>           assert response.status_code == 200, \\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                f\"Expected 200, got {response.status_code}\"\nE           AssertionError: Expected 200, got 404\n\nhelpers/assertion_helper.py:198: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1759063605088,"stop":1759063605088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1759063605088,"stop":1759063605088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1759063605088,"stop":1759063605088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1759063605088,"stop":1759063605088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1759063605088,"stop":1759063605088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pet_url","time":{"start":1759063605089,"stop":1759063605089,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"allure_environment","time":{"start":1759063605089,"stop":1759063605089,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"session","time":{"start":1759063605089,"stop":1759063605089,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"octet_stream_session","time":{"start":1759063606882,"stop":1759063606882,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_pet","time":{"start":1759063607721,"stop":1759063607745,"duration":24},"status":"passed","steps":[{"name":"POST /api/v3/pet","time":{"start":1759063607722,"stop":1759063607745,"duration":23},"status":"passed","steps":[],"attachments":[{"uid":"81606d00a03cc1f","name":"Request","source":"81606d00a03cc1f.json","type":"application/json","size":538},{"uid":"2eb87808c3b03fbc","name":"Response","source":"2eb87808c3b03fbc.json","type":"application/json","size":795}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"temp_data_file","time":{"start":1759063607745,"stop":1759063607745,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Verify that uploading a file with metadata value succeeds","status":"failed","statusMessage":"AssertionError: Expected 200, got 404","statusTrace":"self = <test_upload_image.TestUploadImage object at 0x7f7102700a50>\noctet_stream_session = <requests.sessions.Session object at 0x7f7102742dd0>\npet_url = 'https://petstore3.swagger.io/api/v3/pet'\ntest_pet = {'category': {'id': 1, 'name': 'Dogs'}, 'id': 571501, 'name': 'Hardy', 'photoUrls': ['https://pixabay.com/photos/pomeranian-dog-puppy-mammal-animal-8096885/'], ...}\ntemp_data_file = '/tmp/tmp13dxhcf9.webp'\nmetadata = 'longlonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglong'\n\n    @pytest.mark.parametrize(\"metadata\", [\n        \"\",\n        \"12345\",\n        \"abcDEF\",\n        \"with space\",\n        \"special_!@#$%^&*()\",\n        \"meta=param&flag=true\",\n        \"тест\",\n        \"犬\",\n        \"emoji_\uD83D\uDE0A\uD83D\uDD25\",\n        \"long\" * 50\n    ])\n    @allure.description(\"Verify that uploading a file with metadata value succeeds\")\n    def test_upload_pet_file_with_metadata_succeeds(self, octet_stream_session, pet_url, test_pet, temp_data_file,\n                                                    metadata):\n        pet_id = test_pet[\"id\"]\n        upload_url = build_pet_upload_file_url(pet_url, pet_id=pet_id, metadata=metadata)\n    \n        with open(temp_data_file, \"rb\") as file:\n            response = upload_post_with_allure(octet_stream_session, upload_url, file)\n    \n>       assert_file_successfully_uploaded(response, pet_id)\n\ntests/api/test_upload_image.py:47: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = <Response [404]>, pet_id = 571501\n\n    def assert_file_successfully_uploaded(response, pet_id):\n        with allure.step(\"Verify that file was uploaded successfully\"):\n>           assert response.status_code == 200, \\\n                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n                f\"Expected 200, got {response.status_code}\"\nE           AssertionError: Expected 200, got 404\n\nhelpers/assertion_helper.py:198: AssertionError","steps":[{"name":"POST /api/v3/pet/571501/uploadImage","time":{"start":1759063607745,"stop":1759063607770,"duration":25},"status":"passed","steps":[],"attachments":[{"uid":"523818f822e9c42e","name":"Request","source":"523818f822e9c42e.json","type":"application/json","size":219},{"uid":"238232cf8de63cb9","name":"Response","source":"238232cf8de63cb9.json","type":"application/json","size":494}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify that file was uploaded successfully","time":{"start":1759063607770,"stop":1759063607770,"duration":0},"status":"failed","statusMessage":"AssertionError: Expected 200, got 404\n","statusTrace":"  File \"/home/runner/work/python-testing-lab/python-testing-lab/helpers/assertion_helper.py\", line 198, in assert_file_successfully_uploaded\n    assert response.status_code == 200, \\\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"temp_data_file::0","time":{"start":1759063607777,"stop":1759063607777,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"test_pet::0","time":{"start":1759063607778,"stop":1759063607803,"duration":25},"status":"passed","steps":[{"name":"DELETE /api/v3/pet/571501","time":{"start":1759063607778,"stop":1759063607803,"duration":25},"status":"passed","steps":[],"attachments":[{"uid":"eb01395e3f84fd99","name":"Request","source":"eb01395e3f84fd99.json","type":"application/json","size":211},{"uid":"a7fd99bae2719bb3","name":"Response","source":"a7fd99bae2719bb3.json","type":"application/json","size":492}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"story","value":"Upload image"},{"name":"feature","value":"Pet API"},{"name":"tag","value":"pet_upload_image"},{"name":"parentSuite","value":"tests.api"},{"name":"suite","value":"test_upload_image"},{"name":"subSuite","value":"TestUploadImage"},{"name":"host","value":"runnervm3ublj"},{"name":"thread","value":"2109-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api.test_upload_image"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"metadata","value":"'longlonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglong'"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["pet_upload_image"]},"source":"afc1d24bf6b34717.json","parameterValues":["'longlonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglonglong'"]}