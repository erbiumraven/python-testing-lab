{"uid":"4706499e48747f7a","name":"test_find_pets_multiple_tags","fullName":"tests.api.test_pet_tags.TestFindPetByTag#test_find_pets_multiple_tags","historyId":"cf3e6ccc5cdbd052d93ed4713d997da9","time":{"start":1759063606382,"stop":1759063606406,"duration":24},"description":"Find pets by multiple tags returns all matching pets.","descriptionHtml":"<p>Find pets by multiple tags returns all matching pets.</p>\n","status":"failed","statusMessage":"AssertionError: Expected at least 3 pets in response, but got 0 pets","statusTrace":"self = <test_pet_tags.TestFindPetByTag object at 0x7f71028d9d50>\nsession = <requests.sessions.Session object at 0x7f710270e890>\npet_tags_url = 'https://petstore3.swagger.io/api/v3/pet/findByTags'\nall_tags_pets = [{'category': {'id': 1, 'name': 'Dogs'}, 'id': 495177, 'name': 'Hardy', 'photoUrls': ['https://pixabay.com/photos/pome...710932, 'name': 'Hardy', 'photoUrls': ['https://pixabay.com/photos/pomeranian-dog-puppy-mammal-animal-8096885/'], ...}]\n\n    @allure.description(\"Find pets by multiple tags returns all matching pets.\")\n    def test_find_pets_multiple_tags(self, session, pet_tags_url, all_tags_pets):\n        tag_names = {tag[\"name\"] for pet in all_tags_pets for tag in pet.get(\"tags\", [])}\n        tags = \",\".join(tag_names)\n    \n        url = f\"{pet_tags_url}?tags={tags}\"\n        response = get_with_allure(session, url)\n>       assert_pet_tags_success(response, tag_names, all_tags_pets)\n\ntests/api/test_pet_tags.py:31: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = <Response [200]>, tag_names = {'4_tag', 'tag1', 'tag2'}\nall_tags_pets = [{'category': {'id': 1, 'name': 'Dogs'}, 'id': 495177, 'name': 'Hardy', 'photoUrls': ['https://pixabay.com/photos/pome...710932, 'name': 'Hardy', 'photoUrls': ['https://pixabay.com/photos/pomeranian-dog-puppy-mammal-animal-8096885/'], ...}]\n\n    def assert_pet_tags_success(response, tag_names, all_tags_pets):\n        with allure.step(f'Verify that pets with tags {tag_names} (200)'):\n            assert response.status_code == 200, f\"Expected 200, got {response.status_code}\"\n    \n            json_data = response.json()\n>           assert len(json_data) >= len(\n                all_tags_pets), f\"Expected at least {len(all_tags_pets)} pets in response, but got {len(json_data)} pets\"\nE           AssertionError: Expected at least 3 pets in response, but got 0 pets\n\nhelpers/assertion_helper.py:131: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"event_loop_policy","time":{"start":1759063605088,"stop":1759063605088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1759063605088,"stop":1759063605088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pytestconfig","time":{"start":1759063605088,"stop":1759063605088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1759063605088,"stop":1759063605088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1759063605088,"stop":1759063605088,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"pet_url","time":{"start":1759063605089,"stop":1759063605089,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"allure_environment","time":{"start":1759063605089,"stop":1759063605089,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"session","time":{"start":1759063605089,"stop":1759063605089,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"all_tags_pets","time":{"start":1759063606311,"stop":1759063606382,"duration":71},"status":"passed","steps":[{"name":"POST /api/v3/pet","time":{"start":1759063606311,"stop":1759063606334,"duration":23},"status":"passed","steps":[],"attachments":[{"uid":"faf3889bbe7e09a8","name":"Request","source":"faf3889bbe7e09a8.json","type":"application/json","size":536},{"uid":"af355a5c9391189a","name":"Response","source":"af355a5c9391189a.json","type":"application/json","size":793}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"POST /api/v3/pet","time":{"start":1759063606334,"stop":1759063606358,"duration":24},"status":"passed","steps":[],"attachments":[{"uid":"a84c5218f2b701f6","name":"Request","source":"a84c5218f2b701f6.json","type":"application/json","size":536},{"uid":"e836dc93a9695c4d","name":"Response","source":"e836dc93a9695c4d.json","type":"application/json","size":793}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"POST /api/v3/pet","time":{"start":1759063606358,"stop":1759063606382,"duration":24},"status":"passed","steps":[],"attachments":[{"uid":"cd3d061c3feb79b9","name":"Request","source":"cd3d061c3feb79b9.json","type":"application/json","size":537},{"uid":"3252800df78fdf15","name":"Response","source":"3252800df78fdf15.json","type":"application/json","size":794}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"pet_tags_url","time":{"start":1759063606311,"stop":1759063606311,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Find pets by multiple tags returns all matching pets.","status":"failed","statusMessage":"AssertionError: Expected at least 3 pets in response, but got 0 pets","statusTrace":"self = <test_pet_tags.TestFindPetByTag object at 0x7f71028d9d50>\nsession = <requests.sessions.Session object at 0x7f710270e890>\npet_tags_url = 'https://petstore3.swagger.io/api/v3/pet/findByTags'\nall_tags_pets = [{'category': {'id': 1, 'name': 'Dogs'}, 'id': 495177, 'name': 'Hardy', 'photoUrls': ['https://pixabay.com/photos/pome...710932, 'name': 'Hardy', 'photoUrls': ['https://pixabay.com/photos/pomeranian-dog-puppy-mammal-animal-8096885/'], ...}]\n\n    @allure.description(\"Find pets by multiple tags returns all matching pets.\")\n    def test_find_pets_multiple_tags(self, session, pet_tags_url, all_tags_pets):\n        tag_names = {tag[\"name\"] for pet in all_tags_pets for tag in pet.get(\"tags\", [])}\n        tags = \",\".join(tag_names)\n    \n        url = f\"{pet_tags_url}?tags={tags}\"\n        response = get_with_allure(session, url)\n>       assert_pet_tags_success(response, tag_names, all_tags_pets)\n\ntests/api/test_pet_tags.py:31: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nresponse = <Response [200]>, tag_names = {'4_tag', 'tag1', 'tag2'}\nall_tags_pets = [{'category': {'id': 1, 'name': 'Dogs'}, 'id': 495177, 'name': 'Hardy', 'photoUrls': ['https://pixabay.com/photos/pome...710932, 'name': 'Hardy', 'photoUrls': ['https://pixabay.com/photos/pomeranian-dog-puppy-mammal-animal-8096885/'], ...}]\n\n    def assert_pet_tags_success(response, tag_names, all_tags_pets):\n        with allure.step(f'Verify that pets with tags {tag_names} (200)'):\n            assert response.status_code == 200, f\"Expected 200, got {response.status_code}\"\n    \n            json_data = response.json()\n>           assert len(json_data) >= len(\n                all_tags_pets), f\"Expected at least {len(all_tags_pets)} pets in response, but got {len(json_data)} pets\"\nE           AssertionError: Expected at least 3 pets in response, but got 0 pets\n\nhelpers/assertion_helper.py:131: AssertionError","steps":[{"name":"GET /api/v3/pet/findByTags","time":{"start":1759063606382,"stop":1759063606406,"duration":24},"status":"passed","steps":[],"attachments":[{"uid":"1506ce872d0a7454","name":"Request","source":"1506ce872d0a7454.json","type":"application/json","size":211},{"uid":"709158b4855b9f99","name":"Response","source":"709158b4855b9f99.json","type":"application/json","size":480}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"Verify that pets with tags {'4_tag', 'tag2', 'tag1'} (200)","time":{"start":1759063606406,"stop":1759063606406,"duration":0},"status":"failed","statusMessage":"AssertionError: Expected at least 3 pets in response, but got 0 pets\n","statusTrace":"  File \"/home/runner/work/python-testing-lab/python-testing-lab/helpers/assertion_helper.py\", line 131, in assert_pet_tags_success\n    assert len(json_data) >= len(\n           ^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"all_tags_pets::0","time":{"start":1759063609288,"stop":1759063609358,"duration":70},"status":"passed","steps":[{"name":"DELETE /api/v3/pet/495177","time":{"start":1759063609288,"stop":1759063609311,"duration":23},"status":"passed","steps":[],"attachments":[{"uid":"99acd7da556b4ff9","name":"Request","source":"99acd7da556b4ff9.json","type":"application/json","size":211},{"uid":"3e3c671d1d0eaca8","name":"Response","source":"3e3c671d1d0eaca8.json","type":"application/json","size":492}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"DELETE /api/v3/pet/142561","time":{"start":1759063609312,"stop":1759063609334,"duration":22},"status":"passed","steps":[],"attachments":[{"uid":"5d07a2f9d4bf2daa","name":"Request","source":"5d07a2f9d4bf2daa.json","type":"application/json","size":211},{"uid":"65fef7ccb6a3966","name":"Response","source":"65fef7ccb6a3966.json","type":"application/json","size":492}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},{"name":"DELETE /api/v3/pet/710932","time":{"start":1759063609334,"stop":1759063609358,"duration":24},"status":"passed","steps":[],"attachments":[{"uid":"f13c5b6e1ed384a8","name":"Request","source":"f13c5b6e1ed384a8.json","type":"application/json","size":211},{"uid":"e1b89fdd70abce0c","name":"Response","source":"e1b89fdd70abce0c.json","type":"application/json","size":492}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":3,"attachmentsCount":6,"hasContent":true,"attachmentStep":false}],"labels":[{"name":"story","value":"Get Pet by Tags"},{"name":"feature","value":"Pet API"},{"name":"tag","value":"pet_tags"},{"name":"parentSuite","value":"tests.api"},{"name":"suite","value":"test_pet_tags"},{"name":"subSuite","value":"TestFindPetByTag"},{"name":"host","value":"runnervm3ublj"},{"name":"thread","value":"2109-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.api.test_pet_tags"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":["pet_tags"]},"source":"4706499e48747f7a.json","parameterValues":[]}